.. _電氣訊號擷取系統使用手冊:

電氣訊號擷取系統
=======================





一、電氣訊號擷取系統之外觀與功能
------------------------------
如下兩圖為電氣嵌入式訊號擷取盒之正反面，並在下列出各插孔之功能及使用。

.. figure:: /使用手冊照片/a1.jpg
圖1-電氣訊號擷取盒正面

.. figure:: /使用手冊照片/a2.jpg

圖2-電氣訊號擷取盒反面


* 一、插入SD卡(SD card)

* 二、街上RJ45乙太網路線(Ethernet)

* 三、接上UART(電腦端)轉RJ45乙太網路線(Console):
 
* 四、接上電源(24V-1A)  ※ 確實接好再送電


二、電氣訊號擷取系統之終端機操作
------------------------------

* 1.Windows10左下角搜尋「裝置管理員」

.. figure:: /使用手冊照片/a13.png

圖3-裝置管理員介面

* 2.打開連接埠並找尋USB Serial Port

.. figure:: /使用手冊照片/a14.png

圖4-尋找Com Port

* 3.打開PuTTY

.. figure:: /使用手冊照片/a15.png

圖5.Putty設定介面

* 4.先點選Serial，再在Serial line、Speed 內輸入COM PORT及鮑率

.. figure:: /使用手冊照片/a16.png

圖6-Serial 設定示意圖

* 5.按下Open後會出現下圖畫面

.. figure:: /使用手冊照片/a17.png

圖7-進入PuTTY 介面示意圖






三、電氣訊號擷取系統之操作與說明
------------------------------

* 一、	按「Enter」直到出現Arago Project字樣

.. figure:: /使用手冊照片/a3.jpg
圖8-終端機與嵌入式系統連線示意圖

* 二、於am335x-evm login: 輸入「root」，並且按「Enter」

.. figure:: /使用手冊照片/a4.jpg

圖9-嵌入式系統登入介面圖

3.1、A/D片數設定
````````````````

* 1.輸入此指令：#vi /etc/modprobe.d/adc_ti_ads8556.conf

.. figure:: /使用手冊照片/a5.png

圖10-進入數位類比轉換器設定之指令

* 2.按「Enter」進入後之畫面

.. figure:: /使用手冊照片/a6.png

圖11-嵌入式系統之數位類比轉換器片數設定介面

* 3.按「I」鍵後進入編輯模式，圖上數字部分可以改成1~4片

* 4.更改完畢後按「Esc」並輸入「:wq」即可儲存離開

* 5.並輸入指令：#reboot

* 6.即可重開機並載入設定

3.2、參數設定
````````````````

* 1.輸入此指令：#vi /etc/adc-mqtt/adc-mqtt.properties

.. figure:: /使用手冊照片/a7.png

圖12-進入嵌入式傳輸設定之指令

* 2.按「Enter」進入後之畫面

.. figure:: /使用手冊照片/a8.png

圖13-嵌入式傳輸參數設定之介面

* 3.按「I」鍵後進入編輯模式，可更改下列各設定

.. figure:: /使用手冊照片/a9.png

圖14-嵌入式傳輸參數設定之更改項目

* 4.設定如下

=================  =======================================  
選項                功能      
=================  =======================================  
adc.channel        A/D片數*6(A/D使用片數決定channel數量)
mqtt.uri           接收網址(AVR室電腦：192.168.XX.XXX:1883)
channel.X.id       設定通道名稱
channel.X.rate     設定PT、CT的倍數(參考圖10)
channel.X.offset   設定直流準位
=================  =======================================

* 5.更改完畢後按「Esc」並輸入「:wq」即可儲存離開

* 6.並輸入指令：#reboot即可重開機並載入設定

.. figure:: /使用手冊照片/a10.png

圖15-PT與CT倍率值設定

3.3、查看MQTT連線狀態
`````````````````````````````

* 1.輸入此指令：# journalctl -f -u adc-mqtt.service

.. figure:: /使用手冊照片/a11.png

圖16-查看MQTT連線狀態之指令

* 2.按「Enter」進入後之畫面

.. figure:: /使用手冊照片/a12.png

圖17-嵌入式系統MQTT傳輸成功之介面

* 3.顯示「Finish」表示傳輸成功




